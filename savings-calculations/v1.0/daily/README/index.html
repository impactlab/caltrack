<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../../img/favicon.ico">
  <title>Analysis of Daily Data - CalTRACK Technical Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Analysis of Daily Data";
    var mkdocs_page_input_path = "savings-calculations/v1.0/daily/README.md";
    var mkdocs_page_url = "/savings-calculations/v1.0/daily/README/";
  </script>
  
  <script src="../../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../../.." class="icon icon-home"> CalTRACK Technical Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Technical Specifications</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../../data-sources/v1.0/README/">Data Sources</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../../data-prep/v1.0/README/">Data Preparation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../monthly/README/">Analysis of Monthly Data</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Analysis of Daily Data</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#caltrack-site-level-daily-weather-normalized-metered-energy-savings-estimation-technical-guidelines">CalTRACK Site-level Daily Weather Normalized, Metered Energy Savings Estimation Technical Guidelines</a></li>
                
                    <li><a class="toctree-l4" href="#methodological-overview">Methodological Overview</a></li>
                
                    <li><a class="toctree-l4" href="#technical-guidelines-for-implementing-two-stage-estimation-on-daily-electric-and-gas-usage-data-for-caltrack">Technical guidelines for implementing two-stage estimation on daily electric and gas usage data for CalTRACK</a></li>
                
                    <li><a class="toctree-l4" href="#post-estimation-steps-and-portfolio-aggregation">Post-estimation steps and portfolio aggregation</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../../aggregation/v1.0/README/">Aggregration of Site-level Savings</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../..">CalTRACK Technical Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Technical Specifications &raquo;</li>
        
      
    
    <li>Analysis of Daily Data</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/impactlab/caltrack/edit/master/docs/savings-calculations/v1.0/daily/README.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="caltrack-site-level-daily-weather-normalized-metered-energy-savings-estimation-technical-guidelines"><strong>CalTRACK Site-level Daily Weather Normalized, Metered Energy Savings Estimation Technical Guidelines</strong></h2>
<hr />
<h3 id="methodological-overview"><strong>Methodological Overview</strong></h3>
<p>Site-level Weather Normalized, Metered Energy Savings using daily billing data (both electricity and gas) will use a two-stage estimation approach that builds on the technical appendix of the Uniform Methods Project for Whole Home Building Analysis and the California Evaluation Project, while providing more specific guidance to ensure replicability and address specific methodological issues related to both the data sources and the CalTRACK-specific use cases that are not addressed in prior standards.</p>
<p>The two-stage approach fits two separate parametric models to daily energy use data in both the pre-intervention (baseline) period and the post-intervention (reporting) period using ordinary least squares with the following first stage equation:</p>
<p>
<script type="math/tex; mode=display">UPD_{di} = \mu_i + \beta_{Hi}HDD_d + \beta_{Ci}CDD_d + \epsilon_{di}</script>
</p>
<p>Where:</p>
<p>
<script type="math/tex">UPD_{di}</script> is the total use (therms for gas, kWh for electricity) per day on day, <script type="math/tex">d</script>, for site, <script type="math/tex">i</script>
</p>
<p>
<script type="math/tex">\mu_i</script> is the mean use for site, <script type="math/tex">i</script>
</p>
<p>
<script type="math/tex">\beta_{Hi}</script> is the coefficient for site, <script type="math/tex">i</script>, of heating degree days</p>
<p>
<script type="math/tex">\beta_{Ci}</script> is the coefficient for site, <script type="math/tex">i</script>, of cooling degree days</p>
<p>
<script type="math/tex">HDD_d</script> is the number of heating degree days on day, <script type="math/tex">d</script>, calculated as <code>max(heating balance point - average daily temperature at site i, 0)</code></p>
<p>
<script type="math/tex">CDD_d</script> is the number of cooling degree days on day, <script type="math/tex">d</script>, calculated as <code>max(average daily temperature at site i - cooling balance point, 0)</code></p>
<p>
<script type="math/tex">\epsilon_{di}</script> is the error term at site, <script type="math/tex">i</script>, for day, <script type="math/tex">d</script>
</p>
<p><strong>Note</strong>: during the beta test we explored the use of robust linear regression instead of ordinary least squares but ultimately decided to use ordinary least squares for the initial CalTRACK use case.  A robust regression may offer some significant advantages, as described <a href="https://github.com/impactlab/caltrack/issues/56">here</a> along with our reasons for sticking with ordinary least squares, and is worth considering as a future improvement to these methods.</p>
<p>In the second stage, using parameter estimates from the first stage equation, weather normalized savings for both the baseline period and reporting period can be computed by using corresponding temperature normals for the relevant time period (typical year weather normalized metered energy savings), or by using current-year weather to project forward baseline period use (current year weather normalized metered energy savings) and differencing between baseline and reporting period estimated or actual use, depending on the quantity of interest.</p>
<p>We now proceed with a detailed technical treatment of the steps for daily savings estimation.</p>
<h3 id="technical-guidelines-for-implementing-two-stage-estimation-on-daily-electric-and-gas-usage-data-for-caltrack"><strong>Technical guidelines for implementing two-stage estimation on daily electric and gas usage data for CalTRACK</strong></h3>
<p>CalTRACK savings estimation begins with gas and electric usage data, project data, and weather data that have been cleaned and combined according to the Data Preparation technical specification. Starting with the prepared data, site-level daily metered energy savings analysis is performed by implementing the following steps:</p>
<ol>
<li>
<p>Usage data used in the CalTRACK daily analysis will be done on Use Per Day (<script type="math/tex">UPD</script>) values from daily AMI usage data.</p>
</li>
<li>
<p>Stage one modeling will be done sequentially as a joint optimization problem using minimum model qualification criteria to constrain the space of candidate models, then using model selection criteria for choosing the "best" among candidate models for savings estimation.</p>
</li>
</ol>
<p><strong>Variable Degree Day Base Temperature Search and Optimization</strong></p>
<p>CalTRACK daily methods will use variable degree day base temperatures. Balance point temperatures will be selected by doing a search over the one or two parameter HDD and CDD models separately using the following grid search criteria:</p>
<p>1) Search range for HDD base temp: <code>55 degrees F to 65 degrees F</code></p>
<p>2) Search range for CDD base temp: <code>65 degrees F to 75 degrees F</code></p>
<p>3) With the constraint <code>HDD Base Temp</code>&lt;=<code>CDD Base Temp</code></p>
<p>4) Grid search step size: <code>1 degree</code></p>
<p><strong>Grid Search Data Sufficiency</strong></p>
<p>When searching across balance points, only model those balance points for which there are either: </p>
<ul>
<li>
<p>at least 10 non-zero degree days</p>
</li>
<li>
<p>a sum of at least 20 degree days</p>
</li>
</ul>
<p>This avoids overfitting in the case where only a few days exist with usage and nonzero degree-days, and the usage happens by chance to be unusually high on those days.</p>
<p><strong>Model Qualification</strong></p>
<p>For each site, the choice must be made between using one of the single parameter models (just <code>HDD</code> or <code>CDD</code>) or combined models (<code>HDD</code> and <code>CDD</code>), or the intercept-only model.  This choice is called <em>model selection</em>.  Before model selection, choose qualifying models in the following way:</p>
<ol>
<li>
<p>For each set of balance points in the grid search, fit the single parameter and combined models.</p>
</li>
<li>
<p>Qualifying models are those meeting the following constraints:</p>
</li>
<li>
<p>
<script type="math/tex"> \beta_{Hi}, \beta_{Ci} >= 0 </script>
</p>
</li>
<li>
<p>p-values for <script type="math/tex">\beta_{Hi}</script> and  <script type="math/tex">\beta_{Ci}</script> are <script type="math/tex">< 0.1</script>
</p>
</li>
</ol>
<p><strong>Model Selection/Optimization</strong></p>
<p>Among qualifying models, the model with the maximum adjusted R-squared will be selected as the best fit model for second-stage savings estimation.  If there are no qualifying models, fit the intercept-only model and use that for second-stage savings estimation.</p>
<p><strong>Second Stage Estimated Quantities</strong></p>
<p>During the second stage, four savings quantities will be estimated for each site that meets the minimum data sufficiency criteria for that savings statistic.</p>
<ol>
<li>Cumulative weather normalized metered energy savings over entire performance period</li>
<li>Normal year annualized weather normalized metered energy savings</li>
<li>Year one annualized weather normalized metered energy savings in the the reporting (post-intervention) period</li>
<li>Year two annualized weather normalized metered energy savings in the the reporting (post-intervention) period</li>
</ol>
<p>These site-level second stage quantities are calculated as follows:</p>
<p><strong>Cumulative weather normalized metered energy savings over entire performance period (site-level)</strong></p>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each day after <code>work_end_date</code> using the Stage One model with the reporting period weather data. Be sure to use balance point temperatures from the baseline model when calculating reporting period HDD and CDD values.</li>
<li>Compute <code>daily_gross_savings</code> = <code>predicted_baseline_use - actual_use</code> for every day after <code>work_end_date</code>.</li>
<li>Sum  <code>daily_gross_savings</code> over every day since <code>work_end_date</code>.</li>
</ol>
<p><strong>Normal year annualized weather normalized metered energy savings (site-level)</strong></p>
<ol>
<li>Compute <code>predicted_baseline_use</code> using the Stage One model from the baseline period and degree days from the CZ2010 normal weather year. Be sure to use balance point temperatures from the baseline model when calculating baseline period HDD and CDD values.</li>
<li>Compute <code>predicted_reporting_use</code> using the Stage One model from the reporting period and degree days from the CZ2010 normal weather year file. Be sure to use balance point temperatures from the reporting period model when calculating reporting period HDD and CDD values.</li>
<li>Compute <code>daily_normal_year_gross_savings</code> = <code>predicted_baseline_use - predicted_reporting_use</code> for normal year days</li>
<li>Sum  <code>daily_normal_year_gross_savings</code> over entire normal year.</li>
</ol>
<p><strong>Year one weather normalized metered energy savings from 1 to 12 months after site visit.  (site-level)</strong></p>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each day after <code>work_end_date</code> until 12 calendar months after <code>work_end_date</code> using the Stage One model from the baseline period and reporting period weather data. Be sure to use balance point temperatures from the baseline model when calculating reporting period HDD and CDD values.</li>
<li>Compute <code>daily_gross_savings</code> = <code>predicted_baseline_use - actual_daily_use</code> for 12 complete calendar months after <code>work_end_date</code> for project. For days missing consumption data after the date of the intervention, a baseline mask should exclude those days from consideration as part of a savings calculation.</li>
<li>Sum  <code>daily_gross_savings</code> over the 12 calendar months since <code>work_end_date</code>.</li>
</ol>
<p><strong>Year two weather normalized metered energy savings from 13 to 24 months after site visit.  (site-level)</strong></p>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each day starting 13 months after <code>work_end_date</code> until 24 calendar months after <code>work_end_date</code> using the Stage One model from the baseline period and reporting period weather data. Be sure to use balance point temperatures from the baseline model when calculating reporting period HDD and CDD values.</li>
<li>Compute <code>daily_gross_savings</code> = <code>predicted_baseline_use - actual_daily_use</code> for month 13 to month 24 after <code>work_end_date</code> for project. For days missing consumption data after the date of the intervention, a baseline mask should exclude those days from consideration as part of a savings calculation.</li>
<li>Sum  <code>daily_gross_savings</code> over the 12 calendar months from 13 months after <code>work_end_date</code> to 24 months.</li>
</ol>
<h3 id="post-estimation-steps-and-portfolio-aggregation"><strong>Post-estimation steps and portfolio aggregation</strong></h3>
<p>The goal of CalTRACK is to develop replicable, consistent, and methodologically defensible estimators of savings over portfolios of homes. In order to do that, the above site-level savings quantities must be aggregated to get portfolio-level totals, means, and variances. Taking the site-level estimates, CalTRACK then performs a set of aggregation steps that are specified <a href="https://github.com/impactlab/caltrack/tree/master/aggregation">here</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../../aggregation/v1.0/README/" class="btn btn-neutral float-right" title="Aggregration of Site-level Savings">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../monthly/README/" class="btn btn-neutral" title="Analysis of Monthly Data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/impactlab/caltrack" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../monthly/README/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../../../aggregation/v1.0/README/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../../../js/theme.js"></script>
      <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
