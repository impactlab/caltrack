<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Analysis of Monthly Data - CalTRACK Technical Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Analysis of Monthly Data";
    var mkdocs_page_input_path = "monthly/analysis.md";
    var mkdocs_page_url = "/monthly/analysis/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> CalTRACK Technical Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Getting Started Guides</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../guides/v1guide/">Guide to Version 1.0 Monthly Methods</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Monthly</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../data-sources/">Data Sources for Monthly Methods</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../data-prep/">Data Preparation for Monthly Methods</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Analysis of Monthly Data</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#caltrack-site-level-monthly-gross-savings-estimation-technical-guideline">CalTRACK Site-level Monthly Gross Savings Estimation Technical Guideline</a></li>
                
                    <li><a class="toctree-l4" href="#methodological-overview">Methodological Overview</a></li>
                
                    <li><a class="toctree-l4" href="#technical-guidelines-for-implementing-two-stage-estimation-on-monthly-electric-and-gas-usage-data-for-caltrack">Technical guidelines for implementing two-stage estimation on monthly electric and gas usage data for CalTRACK</a></li>
                
                    <li><a class="toctree-l4" href="#post-estimation-steps-and-portfolio-aggregation">Post-estimation steps and portfolio aggregation</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../aggregation/">Aggregration of Site-level Savings</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">CalTRACK Technical Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Monthly &raquo;</li>
        
      
    
    <li>Analysis of Monthly Data</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="caltrack-site-level-monthly-gross-savings-estimation-technical-guideline">CalTRACK Site-level Monthly Gross Savings Estimation Technical Guideline</h2>
<hr />
<h3 id="methodological-overview">Methodological Overview</h3>
<p>Site-level gross savings using monthly billing data (both electricity and gas) will use a two-stage estimation approach that closely follows methodological recommendations in the technical appendices of the Uniform Methods Project for Whole Home Building Analysis and the California Evaluation Project, with some modifications and more specific guidance developed through empirical testing to ensure consistency and replicability of results.</p>
<p>The idea behind two-stage site-level models is to model the energy use of each house before and after</p>
<p>More formally, the two-stage approach first fits <strong>two</strong> separate parametric models to daily average energy use, one on the pre-intervention (baseline) period and one on the post-intervention (reporting) period for a single site using an ordinary least squares regression of the general form:</p>
<p>
<script type="math/tex; mode=display">UPD_{mi} = \mu_i + \beta_{Hi}H_m + \beta_{Ci}C_m +  \epsilon_{mi} </script>
</p>
<p>Where</p>
<p>
<script type="math/tex">UPD_{mi}</script> is average use (gas in therms, electricity in kWh) per day during billing period <script type="math/tex">m</script> for site <script type="math/tex">i</script>.</p>
<p>
<script type="math/tex">\mu_i</script> is the mean use for site <code>i</code>, or intercept.</p>
<p>
<script type="math/tex">\beta_{Hi}</script> is the coefficient site <code>i</code> on average heating degree days per day.</p>
<p>
<script type="math/tex">\beta_{Ci}</script> is the coefficient or site <code>i</code> on average cooling degree days per day.</p>
<p>
<script type="math/tex">H_m</script> is the average number of heating degree days per day in billing period <code>m</code>, which is a function of a fixed base temperature, the average daily temperatures from the weather station matched to site <code>i</code> during the billing period <code>m</code>, and the number of days in billing period <code>m</code> with matched usage and weather data for site <code>i</code>.</p>
<p>
<script type="math/tex">C_m</script> is the average number of cooling degree days per day in month <code>m</code>, which is a function of a selected base temperature, the average daily temperatures from the weather station matched to site <code>i</code> during month <code>m</code>, and the number of days in month <code>m</code> with matched usage and weather data for site <code>i</code>.</p>
<p>
<script type="math/tex">\epsilon_{mi}</script> is the site specific error term for a given month.</p>
<p>In the second stage, using parameter estimates from the first stage equation, weather normalized savings for both the baseline period and reporting period can be computed by using corresponding temperature normals for the relevant time period (typical year weather normalized gross savings), or by using current-year weather to project forward baseline period use (current year weather normalized gross savings) and differencing between baseline and reporting period estimated or actual use, depending on the quantity of interest.</p>
<p>This site-level two-stage approach without the use of a comparison group, while having significant limitations and tradeoffs, was decided by the technical working group to be appropriate for the two main use cases for CalTRACK, which emphasize effects on the grid and feedback to software vendors, rather than causal programatic effects. In addition to its long history of use in the EM&amp;V literature, it draws on a methodological foundation developed in the more general literature on piecewise linear regression or segmented regression for policy analysis and effect estimates that is used in fields as divers as public health, medical research, and econometrics.</p>
<p>We now proceed with a detailed technical treatment of the steps for monthly savings estimation.</p>
<h3 id="technical-guidelines-for-implementing-two-stage-estimation-on-monthly-electric-and-gas-usage-data-for-caltrack">Technical guidelines for implementing two-stage estimation on monthly electric and gas usage data for CalTRACK</h3>
<p>CalTRACK savings estimation begins with gas and electric usage data, project data, and weather data that have been cleaned and combined according to the Data Cleaning and Integration technical specification. Starting with the prepared data, site-level monthly gross savings analysis is performed by implementing the following steps:</p>
<h4 id="1-generate-use-per-day-values-and-separate-usage-data-into-a-pre-and-a-post-intervention-data-series">1. Generate Use Per Day values and separate usage data into a pre- and a post-intervention data series</h4>
<p>The CalTRACK monthly gross savings analysis uses average use per day (<script type="math/tex">UPD</script>) values for each month by taking the bill-period usage values, then dividing by the number of days in that bill period, as follows:</p>
<p>
<script type="math/tex; mode=display">UPD_m = \frac{1}{n_{U_d}} * \sum{U_d}</script>
</p>
<p>Where</p>
<p>
<script type="math/tex">UPD_m</script> is the average use per day for a given month <code>m</code></p>
<p>
<script type="math/tex">\sum{U_d}</script> is the sum of all daily use values <script type="math/tex">U_d</script> for a given month `m’</p>
<p>
<script type="math/tex">n_{U_d}</script> is the total number of daily use values provided in the usage series that are between the first calendar day of month <code>m</code> and the last calendar day of month <code>m</code></p>
<p><em>Note: If daily use data for gas or electric is not available, monthly billing data can be used for the monthly billing analysis. However, modifications of the denominators for average use per day and for average HDD and CDD per day are necessary.</em></p>
<p>Now split the series of <script type="math/tex">UPD_m</script> values into pre- and post-intervention periods according to the following rules:</p>
<p><em>Pre-intervention period</em>: all <script type="math/tex">UPD_m</script> values from the beginning of the series up to the the complete billing month prior to the <code>work_start_date</code>. The month containing <code>work_start_date</code> is excluded from this series.</p>
<p><em>Post-intervention period</em>: all <script type="math/tex">UPD_m</script> values from the first billing month after the <code>work_end_date</code> to the end of the series.</p>
<p><strong>Final data sufficiency qualification check</strong>: All qualifying sites must have at least 12 months of contiguous $UPD_m$ values in the pre-intervention series and at least 12 months of contiguous post-intervention <script type="math/tex">UPD_m</script> values starting with the month after <code>work_end_date</code>.</p>
<p><strong>All sites not meeting these minimum data requirements are thrown out of the analysis</strong></p>
<h4 id="2-set-fixed-degree-day-base-temperature-and-calculated-hdd-and-cdd">2. Set fixed degree day base temperature and calculated HDD and CDD</h4>
<p>Next you calculate total HDD and CDD for the each billing period in the series. CalTRACK will use a fixed degree day base for monthly billing analysis. The following balance point temperatures will be use:</p>
<p>HDD base temp: 60 F</p>
<p>CDD base temp: 70 F</p>
<p>HDD and CDD values are calculated as follows</p>
<p>
<script type="math/tex; mode=display">HDD_m = \frac{1}{n_{U_d}} * \sum{ \max(60 - T_{ave}, 0) }</script>
</p>
<p>Where</p>
<p>
<script type="math/tex">HDD_m</script> = Average heating degree days per day for billing period <code>m</code></p>
<p>
<script type="math/tex">n_{U_d}</script> = the number of days with both weather and usage data</p>
<p>
<script type="math/tex">\sum</script> = the sum of the degree  over each day <code>d</code> in billing period <code>m</code></p>
<p>
<script type="math/tex">\max</script> = the maximum of the two values in ()</p>
<p>
<script type="math/tex">T_{ave}</script> = the average temperature for day <code>d</code></p>
<p>And</p>
<p>
<script type="math/tex; mode=display">CDD_m = \frac{1}{n_{U_d}} * \sum{ max(ave_temp_d - 70, 0) }</script>
</p>
<p>Where</p>
<p>
<script type="math/tex">CDD_m</script> = Cooling degree days for billing period <code>m</code></p>
<p>
<script type="math/tex">n_{U_d}</script> = the number of days with both weather and usage data</p>
<p>
<script type="math/tex">\sum</script> = the sum of values in {} over each day <code>d</code> in billing period <code>m</code></p>
<p>
<script type="math/tex">\max</script> = the maximum of the two values in ()</p>
<p>
<script type="math/tex">T_{ave}</script> = the average temperature for day <code>d</code></p>
<p><em>Daily average temperatures are taken from the GSOD average data temperature dataset provided by NOAA</em></p>
<h4 id="3-fit-all-candidate-models-and-apply-qualification-criteria">3. Fit All Candidate Models and Apply Qualification Criteria</h4>
<p>For each site, all allowable models will be run as candidate models and then have minimum fitness criteria set for qualification.</p>
<p>For CalTRACK electric monthly savings analysis, the following candidate models are fit:</p>
<p>
<script type="math/tex; mode=display"> UPD_{mi} = \mu_i + \beta_{Hi}H_m + \beta_{Ci}C_m +  \epsilon_{mi} </script>
</p>
<p>
<script type="math/tex; mode=display"> UPD_{mi} = \mu_i + \beta_{Hi}H_m +  \epsilon_{mi} </script>
</p>
<p>
<script type="math/tex; mode=display"> UPD_{mi} = \mu_i + \beta_{Ci}C_m +  \epsilon_{mi} </script>
</p>
<p>
<script type="math/tex; mode=display"> UPD_{mi} = \mu_i + \epsilon_{mi} </script>
</p>
<p>with the constraints</p>
<p>
<script type="math/tex; mode=display">\beta_{H} > 0</script>
</p>
<p>
<script type="math/tex; mode=display">\beta_{C} > 0</script>
</p>
<p>
<script type="math/tex; mode=display">\mu_i > 0</script>
</p>
<p>For electric, qualifying models for selection must have each parameter estimate meet the minimum significance criteria of $p &lt; 0.1$ and are strictly positive. All qualifying models are considered for final model selection.</p>
<p>For CalTRACK gas monthly savings analysis, the following candidate models are fit:</p>
<p>
<script type="math/tex; mode=display">UPD_{mi} = \mu_i + \beta_{Hi}H_m +  \epsilon_{mi} </script>
</p>
<p>
<script type="math/tex; mode=display">UPD_{mi} = \mu_i + \beta_{Ci}C_m +  \epsilon_{mi} </script>
</p>
<p>
<script type="math/tex; mode=display">UPD_{mi} = \mu_i + \epsilon_{mi} </script>
</p>
<p>with the constraints</p>
<p>
<script type="math/tex; mode=display">\beta_{H} > 0</script>
</p>
<p>
<script type="math/tex; mode=display">\mu_i > 0</script>
</p>
<p>If each parameter estimate meets minimum significance criteria (p &lt; 0.1) and are strictly positive, then the model is a qualifying model for inclusion in model selection.</p>
<h4 id="4-select-the-best-for-pre-intervenion-and-post-intervention-periods-for-use-in-second-stage-savings-estimation">4. Select the best for pre-intervenion and post-intervention periods for use in second-stage savings estimation</h4>
<p>All qualifying pre-intervention models are compared to each other and among qualifying models, the model with the maximum adjusted R-squared will be selected for second-stage savings estimation.</p>
<p>For the monthly billing analysis, because we are using fixed degree days instead of variable degree days, adjusted R-squared will be defined as</p>
<p>
<script type="math/tex; mode=display"> adjR^2 = 1 - \frac{SS_{res}/df_e}{SS_{tot}/df_t} </script>
</p>
<p>Where</p>
<p>
<script type="math/tex"> SS_{res} </script> is the sum of squares of residuals</p>
<p>
<script type="math/tex"> df_e </script> is the degrees of freedom of the estimate of the underlying population error variance, and is calculated using <code>n-p-1</code>, where <code>n</code> is the number of observations in the sample used to estimate the model and <code>p</code> is the number of explanatory variables, not including the constant term and not including degree day base temperature as a parameter because it’s fixed</p>
<p>
<script type="math/tex"> SS_{tot} </script> is the total sum of squares</p>
<p>
<script type="math/tex"> df_t </script> is the degrees of freedom of the estimate of the population variance of the dependent variable, and is calculated as <code>n-1</code>, were <code>n</code> is the size of the sample use to estimate the model</p>
<p>All qualifying post-intervention models are compared to each other and among qualifying models, the model with the maximum adjusted R-squared will be selected for second-stage savings estimation.</p>
<h4 id="5-estimate-second-stage-gross-savings-quantities-based-on-selected-first-stage-pre-and-post-intervention-models">5. Estimate second-stage gross savings quantities based on selected first stage pre- and post-intervention models</h4>
<p>During the second stage, up to five savings quantities will be estimated for each site that meets the minimum data sufficiency criteria for that savings statistic.</p>
<p>Cumulative gross savings over entire performance period
Year one annualized actual gross savings in the the reporting (post-intervention) period
Year two annualized actual gross savings in the the reporting (post-intervention) period
Year one annualized gross savings in the normal year
Year two annualized gross savings in the normal year</p>
<p>These site-level second stage quantities are calculated as follows:</p>
<h4 id="cumulative-gross-savings-over-entire-performance-period-site-level">Cumulative gross savings over entire performance period (site-level)</h4>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each complete billing period after <code>work_end_date</code> using parameter estimates from the stage one model from the pre-intervention (baseline) period model and the associated average degree days for each month in the post-intervention (reporting) period, ensuring that the same degree day values calculated for stage one model fits are use in stage two estimation.</li>
<li>Compute <code>monthly_gross_savings</code> = <code>predicted_baseline_monthly_use - actual_monthly_use</code> for every complete billing periods after <code>work_end_date</code> for project</li>
<li>Sum  <code>monthly_gross_savings</code> over every complete billing period since <code>work_end_date</code>.</li>
</ol>
<h4 id="year-one-gross-savings-from-1-to-12-months-after-site-visit-site-level">Year one gross savings from 1 to 12 months after site visit. (site-level)</h4>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each complete billing period after <code>work_end_date</code> until 12 billing periods after <code>work_end_date</code>  using parameter estimates from the stage one model from the pre-intervention (baseline) period model and the associated average degree days for each month in the post-intervention (reporting) period, ensuring that the same degree day values calculated for stage one model fits are use in stage two estimation.</li>
<li>Compute <code>monthly_gross_savings</code> = <code>predicted_baseline_monthly_use - actual_monthly_use</code> for 12 complete billing periods after <code>work_end_date</code> for project</li>
<li>Sum  <code>monthly_gross_savings</code> over the 12 billing periods since <code>work_end_date</code>.</li>
</ol>
<h4 id="year-two-gross-savings-from-13-to-24-months-after-site-visit-site-level">Year two gross savings from 13 to 24 months after site visit. (site-level)</h4>
<ol>
<li>Compute <code>predicted_baseline_use</code> for each complete billing period starting 13 months after <code>work_end_date</code> until 24 billing periods after <code>work_end_date</code>  using parameter estimates from the stage one model from the pre-intervention (baseline) period model and the associated average degree days for each month in the post-intervention (reporting) period, ensuring that the same degree day values calculated for stage one model fits are use in stage two estimation.</li>
<li>Compute <code>monthly_gross_savings</code> = <code>predicted_baseline_monthly_use - actual_monthly_use</code> for month 13 to month 24 after <code>work_end_date</code> for project</li>
<li>Sum  <code>monthly_gross_savings</code> over the 12 billing periods from 13 months after <code>work_end_date</code> to 24 months.</li>
</ol>
<h4 id="year-one-site-level-annualized-gross-savings-in-the-normal-year">Year one site-level annualized gross savings in the normal year</h4>
<ol>
<li>Compute <code>predicted_baseline_monthly_use</code> using the stage one model from the baseline period and average degree days from the CZ2010 normal weather year. Use the full month of available values when calculating the average degree days per billing period for the normal year.</li>
<li>Compute <code>predicted_reporting_monthly_use</code> using a <code>stage one</code> model fit to only the first 12 months of post-intervention values and degree days from the CZ2010 normal weather year file. Use the full month of available values when calculating the average degree days per billing period for the normal year.</li>
<li>Compute <code>monthly_normal_year_gross_savings</code> = <code>predicted_baseline_monthly_use - predicted_reporting_monthly_use</code> for normal year months</li>
<li>Sum  <code>monthly_normal_year_gross_savings</code> over entire normal year.</li>
</ol>
<h4 id="year-two-site-level-annualized-gross-savings-in-the-normal-year">Year two site-level annualized gross savings in the normal year</h4>
<ol>
<li>Compute <code>predicted_baseline_monthly_use</code> using the stage one model from the baseline period and degree days from the CZ2010 normal weather year.</li>
<li>Compute <code>predicted_reporting_monthly_use</code> using a <code>stage one</code> model fit to only the 13th-24th months of post-intervention values and degree days from the CZ2010 normal weather year file for the relevant months.</li>
<li>Compute <code>monthly_normal_year_gross_savings</code> = <code>predicted_baseline_monthly_use - predicted_reporting_monthly_use</code> for each normal year month.</li>
<li>Sum  <code>monthly_normal_year_gross_savings</code> over entire normal year.</li>
</ol>
<h3 id="post-estimation-steps-and-portfolio-aggregation">Post-estimation steps and portfolio aggregation</h3>
<p>The goal of CalTRACK is to develop replicable, consistent, and methodologically defensible estimators of savings over <strong>portfolios of homes</strong>. In order to do that, the above site-level savings quantities must be aggregated to get portfolio-level totals, means, and variances. Taking the site-level estimates, CalTRACK then performs a set of aggregation steps that are specified <a href="https://github.com/impactlab/caltrack/tree/master/aggregation">here</a>.</p>
<hr />
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../aggregation/" class="btn btn-neutral float-right" title="Aggregration of Site-level Savings">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../data-prep/" class="btn btn-neutral" title="Data Preparation for Monthly Methods"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../data-prep/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../aggregation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../../js/theme.js"></script>
      <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
